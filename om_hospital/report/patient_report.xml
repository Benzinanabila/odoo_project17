<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="print_patient">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <table class="table table-condensed" style="border: 3px solid black !important;">
                            <tr>
                                <td width="40%">
                                    <p style="text-align:center;padding-top:10px;">
                                        <img t-if="not o.image"
                                             t-att-src="'/web/static/src/img/placeholder.png'" height="140"
                                             border="1" width="120"></img>
<!--                                        <img t-if="o.image"-->
<!--                                             t-att-src="'data:image/png;base64,%s' % to_text(o.image)" height="140"-->
<!--                                             border="1" width="120"></img>-->
<!--                                        <img t-if="o.image"-->
<!--                                             t-att-src="o.image"-->
<!--                                             class="o_avatar o_m2m_avatar position-relative rounded"-->
<!--                                             t-att-class="o.imageClass"/>-->
                                    </p>
                                </td>
                                <td width="60%">
                                    <table>
                                        <tr>
                                            <td colspan="3" class="text-center">
                                                <span t-field="o.name"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span>
                                                    <strong>Age:</strong>
                                                </span>
                                            </td>
                                            <td>
                                                <span >:</span>
                                            </td>
                                            <td>
                                                <span t-field="o.age"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span>
                                                    <strong>Phone:</strong>
                                                </span>
                                            </td>
                                            <td>
                                                <span >:</span>
                                            </td>
                                            <td>
                                                <span t-field="o.phone"></span>
                                            </td>
                                        </tr>
                                    </table>
                                    <div>
                                        <img t-attf-src="/report/barcode/QR/{{o.name}}_{{o.email}}?&amp;width=100&amp;height=100&amp;quiet=0"
                                             width="100" height="100" alt="QR Code"/>
                                    </div>
                                </td>
                            </tr>
                        </table>

                    </div>
                </t>
            </t>
        </t>
    </template>

    <record id="patient_action" model="ir.actions.report">
        <field name="name">Print patient</field>
        <field name="model">hospital.patient</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">om_hospital.print_patient</field>
        <field name="report_file">om_hospital.print_patient</field>
        <field name="binding_model_id" ref="model_hospital_patient"/>
        <field name="binding_type">report</field>
    </record>
</odoo>